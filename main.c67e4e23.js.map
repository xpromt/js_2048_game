{"version":3,"sources":["scripts/main.js"],"names":["messageStart","document","querySelector","messageWin","messageLoose","button","gameScore","fieldRows","querySelectorAll","score","gameBoard","boardInit","resetGame","classList","renderGameBoard","row","col","children","innerText","className","setRandomCell","getRandomNumber","x","y","Math","random","gameCheck","floor","findNull","flat","some","cel","includes","removeEventListener","keyPress","gameStatus","startGame","replace","hidden","addEventListener","rotateBoard","map","_","colIndex","moveLeft","arr","notNull","filter","ceil","nulls","Array","length","fill","moveRight","keypress","key"],"mappings":"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","file":"main.c67e4e23.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLoose = document.querySelector('.message-lose');\n\nconst button = document.querySelector('.button');\n\nconst gameScore = document.querySelector('.game-score');\n\nconst fieldRows = document.querySelectorAll('.field-row');\n\nlet score = 0;\nlet gameBoard = boardInit();\n\nfunction boardInit() {\n  return [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n}\n\nfunction resetGame() {\n  gameBoard = boardInit();\n  score = 0;\n  messageLoose.classList = 'message message-lose hidden';\n  messageWin.classList = 'message message-win hidden';\n}\n\nfunction renderGameBoard() {\n  for (let row = 0; row < 4; row++) {\n    for (let col = 0; col < 4; col++) {\n      fieldRows[row].children[col].innerText\n        = gameBoard[row][col] ? gameBoard[row][col] : '';\n\n      fieldRows[row].children[col].className\n        = `field-cell field-cell--${gameBoard[row][col]}`;\n    }\n  }\n  gameScore.innerText = score;\n}\n\nfunction setRandomCell() {\n  const [x, y] = [\n    getRandomNumber(),\n    getRandomNumber(),\n  ];\n\n  if (!gameBoard[x][y]) {\n    gameBoard[x][y] = Math.random() >= 0.9 ? 4 : 2;\n    gameCheck();\n  } else {\n    setRandomCell();\n  }\n}\n\nfunction getRandomNumber() {\n  return Math.floor(Math.random() * 4);\n}\n\nfunction gameCheck() {\n  const findNull = gameBoard.flat().some(cel => cel === 0);\n  const gameBoardCopy = gameBoard.flat();\n\n  if (gameBoardCopy.includes(2048)) {\n    document.removeEventListener('keyup', keyPress);\n    messageWin.classList = 'message message-win';\n  }\n\n  let gameStatus = true;\n\n  for (let row = 0; row < 4; row++) {\n    for (let col = 0; col < 3; col++) {\n      if (gameBoard[row][col] === gameBoard[row][col + 1]\n        || gameBoard[col][row] === gameBoard[col + 1][row]) {\n        gameStatus = false;\n      }\n    }\n  }\n\n  if (!findNull && gameStatus) {\n    messageLoose.classList = 'message message-lose';\n    document.removeEventListener('keyup', keyPress);\n  }\n}\n\nfunction startGame() {\n  if (button.innerText === 'Start') {\n    button.classList.replace('start', 'restart');\n    button.innerText = 'Restart';\n    messageStart.hidden = true;\n  } else {\n    resetGame();\n  }\n\n  setRandomCell();\n  setRandomCell();\n\n  renderGameBoard();\n  document.addEventListener('keyup', keyPress);\n}\n\nfunction rotateBoard() {\n  gameBoard = gameBoard.map((_, colIndex) =>\n    gameBoard.map(row => row[colIndex]));\n}\n\nfunction moveLeft(arr) {\n  for (let row = 0; row < 4; row++) {\n    const notNull = arr[row].filter(ceil => ceil > 0);\n    const nulls = Array(4 - notNull.length).fill(0);\n\n    arr[row] = [...notNull, ...nulls];\n  }\n\n  for (let row = 0; row < 4; row++) {\n    for (let col = 0; col < 3; col++) {\n      if (arr[row][col] === arr[row][col + 1] && arr[row][col] !== 0) {\n        arr[row][col] *= 2;\n        score += arr[row][col];\n        arr[row][col + 1] = 0;\n      }\n    }\n  }\n}\n\nfunction moveRight(arr) {\n  for (let row = 0; row < 4; row++) {\n    const notNull = arr[row].filter(ceil => ceil > 0);\n    const nulls = Array(4 - notNull.length).fill(0);\n\n    arr[row] = [...nulls, ...notNull];\n  }\n\n  for (let row = 0; row < 4; row++) {\n    for (let col = 3; col > 0; col--) {\n      if (arr[row][col] === arr[row][col - 1] && arr[row][col] !== 0) {\n        arr[row][col] *= 2;\n        score += arr[row][col];\n        arr[row][col - 1] = 0;\n      }\n    }\n  }\n}\n\nfunction keyPress(keypress) {\n  switch (keypress.key) {\n    case 'ArrowLeft':\n      moveLeft(gameBoard);\n      setRandomCell();\n      renderGameBoard();\n      break;\n\n    case 'ArrowUp':\n      rotateBoard();\n      moveLeft(gameBoard);\n      rotateBoard();\n      setRandomCell();\n      renderGameBoard();\n      break;\n\n    case 'ArrowRight':\n      moveRight(gameBoard);\n      setRandomCell();\n      renderGameBoard();\n      break;\n\n    case 'ArrowDown':\n      rotateBoard();\n      moveRight(gameBoard);\n      rotateBoard();\n      setRandomCell();\n      renderGameBoard();\n      break;\n\n    default:\n      break;\n  }\n}\n\nbutton.addEventListener('click', startGame);\n"]}